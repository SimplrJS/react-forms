{"version":3,"sources":["generators/ApiJsonGenerator.ts"],"names":[],"mappings":"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","file":"generators/ApiJsonGenerator.js","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\n\r\nimport * as os  from 'os';\r\nimport * as path from 'path';\r\nimport * as ts from 'typescript';\r\n\r\nimport Extractor from '../Extractor';\r\nimport ApiStructuredType from '../definitions/ApiStructuredType';\r\nimport ApiEnum from '../definitions/ApiEnum';\r\nimport ApiEnumValue from '../definitions/ApiEnumValue';\r\nimport ApiFunction from '../definitions/ApiFunction';\r\nimport ApiItem, { ApiItemKind } from '../definitions/ApiItem';\r\nimport ApiItemVisitor from '../ApiItemVisitor';\r\nimport ApiPackage from '../definitions/ApiPackage';\r\nimport ApiParameter from '../definitions/ApiParameter';\r\nimport ApiProperty from '../definitions/ApiProperty';\r\nimport ApiMember, { AccessModifier } from '../definitions/ApiMember';\r\nimport ApiNamespace from '../definitions/ApiNamespace';\r\nimport ApiModuleVariable from '../definitions/ApiModuleVariable';\r\nimport ApiMethod from '../definitions/ApiMethod';\r\nimport { ReleaseTag } from '../definitions/ApiDocumentation';\r\nimport { IReturn, IParam }from '../IDocElement';\r\nimport JsonFile from '../JsonFile';\r\nimport ApiJsonFile from './ApiJsonFile';\r\n\r\n/**\r\n * For a library such as \"example-package\", ApiFileGenerator generates the \"example-package.api.ts\"\r\n * report which is used to detect API changes.  The output is pseudocode whose syntax is similar\r\n * but not identical to a \"*.d.ts\" typings file.  The output file is designed to be committed to\r\n * Git with a branch policy that will trigger an API review workflow whenever the file contents\r\n * have changed.  For example, the API file indicates *whether* a class has been documented,\r\n * but it does not include the documentation text (since minor text changes should not require\r\n * an API review).\r\n *\r\n * @public\r\n */\r\nexport default class ApiJsonGenerator extends ApiItemVisitor {\r\n  private static _methodCounter: number = 0;\r\n  private static _MEMBERS_KEY: string = 'members';\r\n  private static _EXPORTS_KEY: string = 'exports';\r\n\r\n  protected jsonOutput: Object = {};\r\n\r\n  // @override\r\n  protected visit(apiItem: ApiItem, refObject?: Object): void {\r\n    switch (apiItem.documentation.releaseTag) {\r\n      case ReleaseTag.None:\r\n      case ReleaseTag.Beta:\r\n      case ReleaseTag.Public:\r\n        break;\r\n      default:\r\n        return; // skip @alpha and @internal definitions\r\n    }\r\n\r\n    super.visit(apiItem, refObject);\r\n  }\r\n\r\n  public writeJsonFile(reportFilename: string, extractor: Extractor): void {\r\n    this.visit(extractor.package, this.jsonOutput);\r\n\r\n    // Write the output before validating the schema, so we can debug it\r\n    JsonFile.saveJsonFile(reportFilename, this.jsonOutput);\r\n\r\n    // Validate that the output conforms to our JSON schema\r\n    const apiJsonSchema: { } = JsonFile.loadJsonFile(path.join(__dirname, '../schemas/api-json-schema.json'));\r\n\r\n    JsonFile.validateSchema(this.jsonOutput, apiJsonSchema,\r\n      (errorDetail: string): void => {\r\n        const errorMessage: string\r\n          = `ApiJsonGenerator validation error - output does not conform to api-json-schema.json:` + os.EOL\r\n          + reportFilename + os.EOL\r\n          + errorDetail;\r\n\r\n        console.log(os.EOL + 'ERROR: ' + errorMessage + os.EOL + os.EOL);\r\n        throw new Error(errorMessage);\r\n      }\r\n    );\r\n  }\r\n\r\n  protected visitApiStructuredType(apiStructuredType: ApiStructuredType, refObject?: Object): void {\r\n    if (!apiStructuredType.supportedName) {\r\n      return;\r\n    }\r\n\r\n    const kind: string =\r\n      apiStructuredType.kind === ApiItemKind.Class ? ApiJsonFile.convertKindToJson(ApiItemKind.Class) :\r\n      apiStructuredType.kind === ApiItemKind.Interface ?\r\n        ApiJsonFile.convertKindToJson(ApiItemKind.Interface) : '';\r\n\r\n    const structureNode: Object = {\r\n      kind: kind,\r\n      extends: apiStructuredType.extends || '',\r\n      implements: apiStructuredType.implements || '',\r\n      typeParameters: apiStructuredType.typeParameters || [],\r\n      deprecatedMessage: apiStructuredType.documentation.deprecatedMessage || [],\r\n      summary: apiStructuredType.documentation.summary || [],\r\n      remarks: apiStructuredType.documentation.remarks || [],\r\n      isBeta: apiStructuredType.documentation.releaseTag === ReleaseTag.Beta\r\n    };\r\n    refObject[apiStructuredType.name] = structureNode;\r\n\r\n    ApiJsonGenerator._methodCounter = 0;\r\n\r\n    const members: ApiItem[] = apiStructuredType.getSortedMemberItems();\r\n\r\n    if (members && members.length) {\r\n      const membersNode: Object = {};\r\n      structureNode[ApiJsonGenerator._MEMBERS_KEY] = membersNode;\r\n\r\n      for (const apiItem of members) {\r\n        this.visit(apiItem, membersNode);\r\n      }\r\n    }\r\n  }\r\n\r\n  protected visitApiEnum(apiEnum: ApiEnum, refObject?: Object): void {\r\n    if (!apiEnum.supportedName) {\r\n      return;\r\n    }\r\n\r\n    const valuesNode: Object = {};\r\n    const enumNode: Object = {\r\n      kind: ApiJsonFile.convertKindToJson(apiEnum.kind),\r\n      values: valuesNode,\r\n      deprecatedMessage: apiEnum.documentation.deprecatedMessage || [],\r\n      summary: apiEnum.documentation.summary || [],\r\n      remarks: apiEnum.documentation.remarks || [],\r\n      isBeta: apiEnum.documentation.releaseTag === ReleaseTag.Beta\r\n    };\r\n    refObject[apiEnum.name] = enumNode;\r\n\r\n    for (const apiItem of apiEnum.getSortedMemberItems()) {\r\n      this.visit(apiItem, valuesNode);\r\n    }\r\n  }\r\n\r\n  protected visitApiEnumValue(apiEnumValue: ApiEnumValue, refObject?: Object): void {\r\n    if (!apiEnumValue.supportedName) {\r\n      return;\r\n    }\r\n\r\n    const declaration: ts.Declaration = apiEnumValue.getDeclaration();\r\n    const firstToken: ts.Node = declaration ? declaration.getFirstToken() : undefined;\r\n    const lastToken: ts.Node = declaration ? declaration.getLastToken() : undefined;\r\n\r\n    const value: string = lastToken && lastToken !== firstToken ? lastToken.getText() : '';\r\n\r\n    refObject[apiEnumValue.name] = {\r\n      kind: ApiJsonFile.convertKindToJson(apiEnumValue.kind),\r\n      value: value,\r\n      deprecatedMessage: apiEnumValue.documentation.deprecatedMessage || [],\r\n      summary: apiEnumValue.documentation.summary || [],\r\n      remarks: apiEnumValue.documentation.remarks || [],\r\n      isBeta: apiEnumValue.documentation.releaseTag === ReleaseTag.Beta\r\n    };\r\n  }\r\n\r\n  protected visitApiFunction(apiFunction: ApiFunction, refObject?: Object): void {\r\n    if (!apiFunction.supportedName) {\r\n      return;\r\n    }\r\n\r\n    for (const param of apiFunction.params) {\r\n      this.visitApiParam(param, apiFunction.documentation.parameters[param.name]);\r\n    }\r\n    const returnValueNode: IReturn = {\r\n      type: apiFunction.returnType,\r\n      description: apiFunction.documentation.returnsMessage\r\n    };\r\n\r\n    const newNode: Object = {\r\n      kind: ApiJsonFile.convertKindToJson(apiFunction.kind),\r\n      returnValue: returnValueNode,\r\n      parameters: apiFunction.documentation.parameters,\r\n      deprecatedMessage: apiFunction.documentation.deprecatedMessage || [],\r\n      summary: apiFunction.documentation.summary || [],\r\n      remarks: apiFunction.documentation.remarks || [],\r\n      isBeta: apiFunction.documentation.releaseTag === ReleaseTag.Beta\r\n    };\r\n\r\n    refObject[apiFunction.name] = newNode;\r\n  }\r\n\r\n  protected visitApiPackage(apiPackage: ApiPackage, refObject?: Object): void {\r\n    /* tslint:disable:no-string-literal */\r\n    refObject['kind'] = ApiJsonFile.convertKindToJson(apiPackage.kind);\r\n    refObject['summary'] = apiPackage.documentation.summary;\r\n    refObject['remarks'] = apiPackage.documentation.remarks;\r\n    /* tslint:enable:no-string-literal */\r\n\r\n    const membersNode: Object = {};\r\n    refObject[ApiJsonGenerator._EXPORTS_KEY] = membersNode;\r\n\r\n    for (const apiItem of apiPackage.getSortedMemberItems()) {\r\n      this.visit(apiItem, membersNode);\r\n    }\r\n  }\r\n\r\n  protected visitApiNamespace(apiNamespace: ApiNamespace, refObject?: Object): void {\r\n    if (!apiNamespace.supportedName) {\r\n      return;\r\n    }\r\n\r\n    const membersNode: Object = {};\r\n    for (const apiItem of apiNamespace.getSortedMemberItems()) {\r\n      this.visit(apiItem, membersNode);\r\n    }\r\n\r\n    const newNode: Object = {\r\n      kind: ApiJsonFile.convertKindToJson(apiNamespace.kind),\r\n      deprecatedMessage: apiNamespace.documentation.deprecatedMessage || [],\r\n      summary: apiNamespace.documentation.summary || [],\r\n      remarks: apiNamespace.documentation.remarks || [],\r\n      isBeta: apiNamespace.documentation.releaseTag === ReleaseTag.Beta,\r\n      exports: membersNode\r\n    };\r\n\r\n    refObject[apiNamespace.name] = newNode;\r\n  }\r\n\r\n  protected visitApiMember(apiMember: ApiMember, refObject?: Object): void {\r\n    if (!apiMember.supportedName) {\r\n      return;\r\n    }\r\n\r\n    refObject[apiMember.name] = 'apiMember-' + apiMember.getDeclaration().kind;\r\n  }\r\n\r\n  protected visitApiProperty(apiProperty: ApiProperty, refObject?: Object): void {\r\n    if (!apiProperty.supportedName) {\r\n      return;\r\n    }\r\n\r\n    if (apiProperty.getDeclaration().kind === ts.SyntaxKind.SetAccessor) {\r\n      return;\r\n    }\r\n\r\n    const newNode: Object = {\r\n      kind: ApiJsonFile.convertKindToJson(apiProperty.kind),\r\n      isOptional: !!apiProperty.isOptional,\r\n      isReadOnly: !!apiProperty.isReadOnly,\r\n      isStatic: !!apiProperty.isStatic,\r\n      type: apiProperty.type,\r\n      deprecatedMessage: apiProperty.documentation.deprecatedMessage || [],\r\n      summary: apiProperty.documentation.summary || [],\r\n      remarks: apiProperty.documentation.remarks || [],\r\n      isBeta: apiProperty.documentation.releaseTag === ReleaseTag.Beta\r\n    };\r\n\r\n    refObject[apiProperty.name] = newNode;\r\n  }\r\n\r\n  protected visitApiModuleVariable(apiModuleVariable: ApiModuleVariable, refObject?: Object): void {\r\n    const newNode: Object = {\r\n      kind: ApiJsonFile.convertKindToJson(apiModuleVariable.kind),\r\n      type: apiModuleVariable.type,\r\n      value: apiModuleVariable.value,\r\n      deprecatedMessage: apiModuleVariable.documentation.deprecatedMessage || [],\r\n      summary: apiModuleVariable.documentation.summary || [],\r\n      remarks: apiModuleVariable.documentation.remarks || [],\r\n      isBeta: apiModuleVariable.documentation.releaseTag === ReleaseTag.Beta\r\n    };\r\n\r\n    refObject[apiModuleVariable.name] = newNode;\r\n  }\r\n\r\n  protected visitApiMethod(apiMethod: ApiMethod, refObject?: Object): void {\r\n    if (!apiMethod.supportedName) {\r\n      return;\r\n    }\r\n\r\n    for (const param of apiMethod.params) {\r\n      this.visitApiParam(param, apiMethod.documentation.parameters[param.name]);\r\n    }\r\n\r\n    let newNode: Object;\r\n    if (apiMethod.name === '__constructor') {\r\n      newNode = {\r\n        kind: ApiJsonFile.convertKindToJson(ApiItemKind.Constructor),\r\n        signature: apiMethod.getDeclarationLine(),\r\n        parameters: apiMethod.documentation.parameters,\r\n        deprecatedMessage: apiMethod.documentation.deprecatedMessage || [],\r\n        summary: apiMethod.documentation.summary || [],\r\n        remarks: apiMethod.documentation.remarks || []\r\n      };\r\n    } else {\r\n      const returnValueNode: IReturn = {\r\n        type: apiMethod.returnType,\r\n        description: apiMethod.documentation.returnsMessage\r\n      };\r\n\r\n      newNode = {\r\n        kind: ApiJsonFile.convertKindToJson(apiMethod.kind),\r\n        signature: apiMethod.getDeclarationLine(),\r\n        accessModifier: apiMethod.accessModifier ? AccessModifier[apiMethod.accessModifier].toLowerCase() : '',\r\n        isOptional: !!apiMethod.isOptional,\r\n        isStatic: !!apiMethod.isStatic,\r\n        returnValue: returnValueNode,\r\n        parameters: apiMethod.documentation.parameters,\r\n        deprecatedMessage: apiMethod.documentation.deprecatedMessage || [],\r\n        summary: apiMethod.documentation.summary || [],\r\n        remarks: apiMethod.documentation.remarks || [],\r\n        isBeta: apiMethod.documentation.releaseTag === ReleaseTag.Beta\r\n      };\r\n    }\r\n\r\n    refObject[apiMethod.name] = newNode;\r\n  }\r\n\r\n  protected visitApiParam(apiParam: ApiParameter, refObject?: Object): void {\r\n    if (!apiParam.supportedName) {\r\n      return;\r\n    }\r\n\r\n    if (refObject) {\r\n      (refObject as IParam).isOptional = apiParam.isOptional;\r\n      (refObject as IParam).isSpread = apiParam.isSpread;\r\n      (refObject as IParam).type = apiParam.type;\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\src"}